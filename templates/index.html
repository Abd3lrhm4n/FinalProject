{% extends "layout.html" %}

{% block main %}
    <form method="POST" action="/">
        <div class="form-group">
            <input class="form-control" id="password" type="password" name="password" placeholder="Password" />
        </div>
        <div class="form-group">
            <ul class="focus">
                <li class="invalid">Must be at least 8 characters long.</li>
                <li class="invalid">Must contain a lowercase letter.</li>
                <li class="invalid">Must contain an uppercase letter.</li>
                <li class="invalid">Must contain a number.</li>
                <li class="invalid">special character.</li>
            </ul>
        </div>

        <div class="form-group">
            <div class="row">
                <div class="col">
                    <input class="form-control" type="text" name="fullname" placeholder="Full Name"/>
                </div>
                <div class="col">
                    <input class="form-control" type="text" name="petname" placeholder="Pet Name" />
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row">
                <div class="col">
                    <input class="form-control" type="text" name="birthday" placeholder="Birthday" />
                </div>
                <div class="col">
                    <input class="form-control" type="text" name="lovename" placeholder="Love Name" />
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row">
                <div class="col">
                    <input class="form-control" type="text" name="sport" placeholder="Favorite Sport" />
                </div>
                <div class="col">
                    <input class="form-control" type="text" name="team" placeholder="Favorite Team" />
                </div>
            </div>
        </div>

        <button type="submit">Test</button>
    </form>
    <div id="time"></div>
    <div id="dictionary"></div>
    <div id="common"></div>

    <script src="../static/scripts/script.js"></script>
    <script>
        $("form").on("submit", function(){
            // Stop form from submitting normally
            event.preventDefault();

            // Get some values from elements on the page:
            var $form = $(this),
                term = $form.find("input[name='password']").val(),
                url = $form.attr("action");

            // Send the data using post
            var posting = $.post(url, { password: term });

            posting.done(function(data){
                let m = "";
                let c = "";
                console.log(data);
                data[1].matches.forEach(e => {
                    m += ", " + e + " ";

                data[2].matches.forEach(e => {
                    c += ", " + e + " ";
                })
                });
                $("#time").empty().append(
                    data[0].years +" Year " + data[0].months + " Months "+ data[0].weeks + " Weeks " + data[0].days + " Days " + data[0].hours + " Hours " + data[0].mintues + " Mintues " + data[0].seconds + " Seconds ");
            
                $("#dictionary").empty().append(
                    "Found Words in Your Password: " +
                    m + "the percetage of found words in you password: " +
                    data[1].percentage
                );

                $("#common").empty().append(
                    "Found Words in Your Password: " + 
                    c + "the percetage of found words in you password: " +
                    data[2].percentage
                );
            });
        });
        
    </script>
{% endblock %}